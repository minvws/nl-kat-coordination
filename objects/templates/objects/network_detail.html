{% extends "layouts/base.html" %}

{% load i18n %}
{% load static %}

{% block content %}
    {% include "header.html" %}

    <main id="main-content">
        <section>
            {% include "objects/network_detail_introduction.html" with view="details" %}

            <div>
                <h2>{% translate "Details" %}</h2>
                <div>
                    <dl>
                        <div>
                            <dt>{% translate "Address" %}</dt>
                            <dd>
                                {{ network.name }}
                            </dd>
                        </div>
                        <div>
                            <dt>{% translate "Scan level" %}</dt>
                            <dd>
                                {% if network.scan_level != None %}
                                    {% include "partials/scan_level_indicator.html" with value=network.scan_level %}

                                {% else %}
                                    -
                                {% endif %}
                            </dd>
                        </div>
                        <div>
                            <dt>{% translate "Last seen" %}</dt>
                            <dd>
                                {% if network.last_seen %}
                                    {{ network.last_seen|date:"Y-m-d H:i:s" }}
                                {% else %}
                                    -
                                {% endif %}
                            </dd>
                        </div>
                        {% if network.scan_level != None %}
                            <div>
                                <dt>{% translate "Scan type" %}</dt>
                                <dd>
                                    {% if network.declared %}
                                        {% translate "Declared" %}
                                    {% else %}
                                        {% translate "Inherited" %}
                                    {% endif %}
                                </dd>
                            </div>
                        {% endif %}
                        <div>
                            <dt>{% translate "Organizations" %}</dt>
                            <dd>
                                {% with orgs=network.organizations.all %}
                                    {% if orgs %}
                                        <ul>
                                            {% for org in orgs %}<li>{{ org.name }} ({{ org.code }})</li>{% endfor %}
                                        </ul>
                                    {% else %}
                                        -
                                    {% endif %}
                                {% endwith %}
                            </dd>
                        </div>
                    </dl>
                </div>
            </div>
            <div>
                <h2>{% translate "Manage Organizations" %}</h2>
                <form method="post"
                      action="{% url 'objects:network_manage_organizations' network.pk %}">
                    {% csrf_token %}
                    <div>
                        <label for="id_organizations">{% translate "Select Organizations" %}:</label>
                        <select name="organizations" id="id_organizations" multiple size="5">
                            {% for org in all_organizations %}
                                <option value="{{ org.pk }}"
                                        {% if org in network.organizations.all %}selected{% endif %}>
                                    {{ org.name }} ({{ org.code }})
                                </option>
                            {% endfor %}
                        </select>
                        <p>
                            <small>{% translate "Hold Ctrl (Cmd on Mac) to select multiple organizations" %}</small>
                        </p>
                    </div>
                    <button type="submit">{% translate "Update Organizations" %}</button>
                </form>
            </div>
        </section>
    </main>
{% endblock content %}
