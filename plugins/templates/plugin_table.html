{% load i18n %}
{% load static %}

{% include "plugin_list_form.html" %}

<form method="post"
      id="plugin_list_form"
      class="inline layout-wide checkboxes_required">
    {% csrf_token %}
    <div class="horizontal-scroll sticky-column">
        <table class="plugins">
            <caption>{% translate "Plugins overview:" %}</caption>
            <thead>
                <tr>
                    <th scope="col"
                        class="sortable"
                        {% if order_by == "name" %}aria-sort="{{ sorting_order_class }}"{% endif %}>
                        <button form="plugin_list" name="order_by" value="name" class="sort">
                            {% translate "Name" %}
                            <span aria-hidden="true"
                                  class="{% if order_by == "name" and sorting_order == "asc" %}
                                  icon ti-chevron-up
                                  {% elif order_by == "name" and sorting_order == "desc" %}
                                  icon ti-chevron-down
                                  {% else %}
                                  icon ti-direction
                                  {% endif %}"></span>
                        </button>
                    </th>
                    <th>{% translate "Consumes" %}</th>
                    <th scope="col"
                        class="sortable"
                        {% if order_by == "oci_image" %}aria-sort="{{ sorting_order_class }}"{% endif %}>
                        <button form="plugin_list" name="order_by" value="oci_image" class="sort">
                            {% translate "Image" %}
                            <span aria-hidden="true"
                                  class="{% if order_by == "oci_image" and sorting_order == "asc" %}
                                  icon ti-chevron-up
                                  {% elif order_by == "oci_image" and sorting_order == "desc" %}
                                  icon ti-chevron-down
                                  {% else %}
                                  icon ti-direction
                                  {% endif %}"></span>
                        </button>
                    </th>
                    <th>{% translate "Arguments" %}</th>
                    <th scope="col"
                        class="sortable"
                        {% if order_by == "enabled" %}aria-sort="{{ sorting_order_class }}"{% endif %}>
                        <button form="plugin_list" name="order_by" value="enabled" class="sort">
                            {% translate "State" %}
                            <span aria-hidden="true"
                                  class="{% if order_by == "enabled" and sorting_order == "asc" %}
                                  icon ti-chevron-up
                                  {% elif order_by == "enabled" and sorting_order == "desc" %}
                                  icon ti-chevron-down
                                  {% else %}
                                  icon ti-direction
                                  {% endif %}"></span>
                        </button>
                    </th>
                    <th class="visually-hidden">{% translate "Detail page" %}</th>
                </tr>
            </thead>
            <tbody>
                {% for plugin in object_list %}
                    <tr id="plugin_{{ plugin.id|slugify }}">
                        <td>
                            <a href="{% url "plugin_detail" pk=plugin.id %}">{{ plugin.name }}</a>
                        </td>
                        <td>
                            {% for consume in plugin.consumes %}
                                <div>
                                    <span class="plugin-consume">{{ consume }}</span>
                                </div>
                            {% endfor %}
                        </td>
                        <td>
                            <span class="plugin-oci-image">{{ plugin.oci_image }}</span>
                        </td>
                        <td>
                            <span class="plugin-oci-arguments">{{ plugin.oci_arguments }}</span>
                        </td>
                        <td>
                            {% include "new_enable_disable_plugin.html" with plugin=plugin %}

                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</form>
