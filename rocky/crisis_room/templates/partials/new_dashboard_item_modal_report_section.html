{% load i18n %}

{% component "modal" modal_id=modal_id size="dialog-medium" %}
{% fill "header" %}
{% translate "Add report section to dashboard" %}
{% endfill %}
{% fill "content" %}
{% if recipe_ooi.cron_expression %}
    <form method="post" id="new-dashboard-item-form-{{ modal_id }}">
        {% csrf_token %}
        {% include "partials/form/form_errors.html" with form=add_dashboard_item_settings_form %}
        {% include "forms/new_dashboard_item_form_fields.html" with report_pk="AssetReport|"|add:ooi|add:"|"|add:report_type %}
        {% include "partials/form/fieldset.html" with fields=add_dashboard_item_settings_form form_view="horizontal" %}

    </form>
{% else %}
    <div class="message">
        <div class="explanation"
             role="group"
             aria-label="{% translate "explanation" %}">
            <div>
                <span>{% translate "Report must be scheduled for dashboard items" %}</span>
                <p>
                    {% blocktranslate %}
                        In order for dashboard information to be updated on a regular basis
                        instead of showing static data, the report should be scheduled.
                        The frequency of the schedules recurrence determines how fresh
                        the data on the dashboard will be.
                    {% endblocktranslate %}
                </p>
            </div>
        </div>
    </div>
{% endif %}
{% endfill %}
{% fill "footer_buttons" %}
{% if recipe_ooi.cron_expression %}
    <button type="submit"
            form="new-dashboard-item-form-{{ modal_id }}"
            class="submit"
            name="action"
            value="add_to_dashboard">{% translate "Add to dashboard" %}</button>
{% else %}
    <a class="button ghost"
       href="{% ooi_url "ooi_edit" recipe_ooi organization.code %}">{% translate "Edit report recipe" %}</a>
{% endif %}
<button class="ghost close-modal-button">{% translate "Cancel" %}</button>
{% endfill %}
{% endcomponent %}
{% component_css_dependencies %}
