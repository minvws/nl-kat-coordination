{% load i18n %}
{% load static %}

<div class="filter">
    <div>
        {% if type == "report-section" %}
            <button aria-expanded="false"
                    data-hide-filters-label='{% translate "Objects" %}'>{% translate "Objects" %}</button>
        {% else %}
            <button aria-expanded="false"
                    data-hide-filters-label='{% translate "Applied filters" %}'>
                {% translate "Applied filters" %}
            </button>
        {% endif %}
    </div>
    <form>
        {% if type == "report-section" %}
            <div class="horizontal-scroll">
                <dl>
                    {% if recipe.input_recipe.query %}
                        {% with query=recipe.input_recipe.query %}
                            <div>
                                <dt>{% translate "Object types" %}</dt>
                                <dd>
                                    {{ query.ooi_types|join:", " }}
                                </dd>
                            </div>
                            <div>
                                <dt>{% translate "Clearance level" %}</dt>
                                <dd>
                                    {{ query.scan_level|join:", " }}
                                </dd>
                            </div>
                            <div>
                                <dt>{% translate "Clearance type" %}</dt>
                                <dd>
                                    {{ query.scan_type|join:", " }}
                                </dd>
                            </div>
                        {% endwith %}
                    {% else %}
                        <div>
                            <dt>{% translate "Input objects" %}</dt>
                            <dd>
                                {% if recipe.report_type == "aggregate-organisation-report" %}
                                    {{ recipe.input_recipe.input_oois|join:", " }}
                                {% else %}
                                    {{ data.input_ooi|human_readable }}
                                {% endif %}
                            </dd>
                        </div>
                    {% endif %}
                </dl>
            </div>
        {% else %}
            {% if dashboard_item.item.query %}
                {% with query=dashboard_item.item.get_query %}
                    <dl>
                        {% for filter, value in query.items %}
                            {% if value %}
                                <div>
                                    <dt>{{ filter|capfirst }}</dt>
                                    <dd>
                                        {{ value }}
                                    </dd>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </dl>
                {% endwith %}
            {% else %}
                <li>{% translate "No filters applied" %}</li>
            {% endif %}
        {% endif %}
    </form>
</div>
