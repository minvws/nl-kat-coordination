{% load i18n %}

{% get_language_info for LANGUAGE_CODE as lang %}
<div class="language-selector">
    <div class="dropdown">
        <button type="button"
                aria-controls="language-switcher"
                aria-expanded="false"
                class="dropdown-button ghost">
            {{ lang.name_local|title }}
            <span aria-hidden="true" class="icon ti-chevron-down"></span>
        </button>
        <div class="dropdown-list" id="language-switcher">
            <ul role="listbox">
                {% for language in languages %}
                    {% get_language_info for language as lang %}
                    <li lang="{{ language }}"
                        {% if LANGUAGE_CODE == language %}aria-current="true"{% endif %}>
                        <a hreflang="{{ language }}"
                           href="#"
                           role="option"
                           data-value="{{ language }}"
                           lang="{{ language }}">
                            <button form="set-language" type="submit" name="language" value={{ language }}>
                                {{ lang.name_local.title }}
                            </button>
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <form id="set-language"
          action="{% url "set_language" %}"
          method="post"
          class="inline">
        {% csrf_token %}
    </form>
</div>
