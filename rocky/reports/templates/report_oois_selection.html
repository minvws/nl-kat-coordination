{% extends "layouts/base.html" %}

{% load i18n %}
{% load static %}

{% block content %}
    {% include "header.html" %}

    <main id="main-content" tabindex="-1" class="reports">
        <section>
            <div class="fifty-fifty">
                <div>
                    <h1>{% translate "Reports" %}</h1>
                    <p class="emphasized">{% translate "Overview of reports" %}</p>
                </div>
                <div class="horizontal-view toolbar">
                    <button form="report_type_selection_form" type="submit" class="button">
                        {% translate "Setup report" %}<span class="icon ti-chevron-right"></span>
                    </button>
                </div>
            </div>
            <h2>
                {% blocktranslate trimmed count counter=object_list|length %}
                    Select OOI
                {% plural %}
                    Select OOIs
                {% endblocktranslate %}
            </h2>
            <p>{% translate "Select which objects you want to include in your report." %}</p>
            {% translate "Filter" as filter_title %}
            {% include "partials/ooi_list_filters.html" with title=filter_title clearance_level_filter_form=clearance_level_filter_form %}

            <form id="report_type_selection_form"
                  method="get"
                  action="{% url 'report_type_selection' organization.code %}"
                  class="inline">
                <table>
                    <thead>
                        <th>
                            <input class="toggle-all" data-toggle-target="ooi" type="checkbox">
                        </th>
                        <th>OOI</th>
                        <th>{% translate "OOI-Type" %}</th>
                        <th>{% translate "Clearance level" %}</th>
                    </thead>
                    <tbody>
                        {% for object in object_list %}
                            <tr>
                                <td>
                                    <input type="checkbox" name="ooi" value={{ object.primary_key }}>
                                </td>
                                <td>{{ object.human_readable }}</td>
                                <td>{{ object.ooi_type }}</td>
                                <td>
                                    {% include "partials/scan_level_indicator.html" with value=object.scan_profile.level.value %}

                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </form>
        </section>
    </main>
{% endblock content %}
{% block html_at_end_body %}
    {{ block.super }}
    <script src="{% static "/js/checkboxToggler.js" %}" nonce="{{ request.csp_nonce }}"></script>
{% endblock html_at_end_body %}
