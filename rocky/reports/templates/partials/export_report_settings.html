{% load i18n %}
{% load static %}
{% load report_extra %}
{% load ooi_extra %}
{% load compress %}

<section>
    <div>
        {% if selected_report_types %}
            <h2>{% translate "Report schedule" %}</h2>
            <p>
                {% blocktranslate trimmed %}
                    When scheduling your report, you have two options. You can either choose to generate it just once now,
                    or set it to run automatically at regular intervals, like daily, weekly,
                    or monthly. If you need the report just for a single occasion, select the one-time option.
                {% endblocktranslate %}
            </p>
            <form id="generate_report" class="inline" method="post" action="{{ next }}">
                {% csrf_token %}
                {% include "forms/report_form_fields.html" %}
                {% include "partials/form/fieldset.html" with fields=report_schedule_form_start_date fieldset_parent_class="column-2" %}

                <h2>{% translate "Report name" %}</h2>
                <p>
                    {% blocktranslate trimmed %}
                        When generating reports, we use default naming formats to make the process consistent
                        and efficient. The parent report follows the format {report_type} for {oois_count} object(s),
                        and each asset report uses {report_type} for {ooi}. These placeholders automatically
                        adapt based on the report details. You can customize the names by adding prefixes, suffixes,
                        or other formats like %W for the week number, using options from strftime.org.
                        However, please note that removing placeholders will apply the same custom name to
                        all asset reports when created.
                    {% endblocktranslate %}
                </p>
                {% include "partials/form/fieldset.html" with fields=report_name_form %}
                {% include "partials/form/fieldset.html" with fields=report_asset_name_form %}

                <button type="submit" form="generate_report">
                    {% translate "Generate report" %}<span class="icon ti-chevron-right" aria-hidden="true"></span>
                </button>
            </form>
        {% else %}
            {% include "partials/return_button.html" with btn_text="Go back" %}

        {% endif %}
    </div>
</section>
{% block html_at_end_body %}
    <script src="{% static "js/renameReports.js" %}" nonce="{{ request.csp_nonce }}" type="module"></script>
    <script src="{% static "js/autoSubmit.js" %}" nonce="{{ request.csp_nonce }}" type="module"></script>
{% endblock html_at_end_body %}
