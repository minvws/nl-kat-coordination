{% load i18n %}
{% load ooi_extra %}
{% load report_extra %}

<div class="horizontal-scroll">
    <table>
        <caption class="visually-hidden">{% translate "Scheduled reports:" %}</caption>
        <thead>
            <tr>
                <th scope="col">{% translate "Report Name" %}</th>
                <th scope="col">{% translate "Subreport Name" %}</th>
                <th scope="col">{% translate "Report types" %}</th>
                <th scope="col">{% translate "Scheduled for" %}</th>
                <th scope="col">{% translate "Recurrence" %}</th>
                {% if reports %}<th scope="col"></th>{% endif %}
            </tr>
        </thead>
        <tbody>
            {% for schedule in scheduled_reports %}
                {% if schedule.recipe %}
                    <tr>
                        <td>{{ schedule.recipe.report_name_format }}</td>
                        <td>{{ schedule.recipe.subreport_name_format }}</td>
                        <td>
                            {% for report_type in schedule.recipe.report_types %}
                                <span class="label tags-color-{{ report_type|get_report_type_label_style }}">{{ report_type|get_report_type_name }}</span>
                            {% endfor %}
                        </td>
                        <td>{{ schedule.deadline_at }}</td>
                        <td>{{ schedule.cron }}</td>
                        {% if reports %}
                            <td class="actions">
                                <button class="expando-button"
                                        data-icon-open-class="icon ti-chevron-down"
                                        data-icon-close-class="icon ti-chevron-up"
                                        data-close-label="{% translate "Close details" %}">
                                    {% translate "Open details" %}
                                </button>
                            </td>
                        {% endif %}
                    </tr>
                    {% if reports %}
                        <tr class="expando-row">
                            <td colspan="6">
                                <table>
                                    <tbody>
                                        {% for report in reports %}
                                            <tr>
                                                <td>{{ report }}</td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    {% endif %}
                {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>
